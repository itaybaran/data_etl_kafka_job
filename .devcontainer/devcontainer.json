{
  "name": "data_etl_kafka_job Dev (Runs on Podman)",

  "build": {
    "dockerfile": "Dockerfile",
    "context": "."
  },

  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  "customizations": {
    "vscode": {
        // VS Code settings inside the container
      "settings": {
        "python.defaultInterpreterPath": "/home/vscode/.venv/bin/python"
      },
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-toolsai.jupyter"
      ]
    }
  },

  // Environment variables inside container
  "containerEnv": {
    "PYTHONPATH": "/workspaces/${localWorkspaceFolderBasename}"
  },

  // Important: attach devcontainer to same network as Kafka/Redis
  "runArgs": [
    "--network", "devnet"
  ],

  // Create venv, upgrade pip, install requirements
  "postCreateCommand": "/usr/bin/env bash -lc 'python3 -m venv /home/vscode/.venv && /home/vscode/.venv/bin/python -m pip install -U pip && /home/vscode/.venv/bin/pip install --no-cache-dir -r ${containerWorkspaceFolder}/requirements.txt'"
}
